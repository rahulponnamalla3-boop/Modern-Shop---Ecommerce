<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Modern Shop | Best Deals</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>
:root{
--primary:#2874f0;
--secondary:#fb641b;
--bg:#f1f3f6;
--dark:#212121;
--border:#e0e0e0;
}

body{
background:var(--bg);
font-family:Segoe UI,Roboto;
padding-top:75px;
min-height:100vh;
display:flex;
flex-direction:column;
scroll-behavior: smooth; /* Smooth scrolling effect kosam */
}

.navbar{
background:var(--primary)!important;
box-shadow:0 2px 4px rgba(0,0,0,.1)
}

.navbar-brand {
    font-weight: 800 !important;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    font-size: 1.4rem;
    color: #fff !important;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
}

.nav-link{
color:#fff!important;
font-weight:600;
transition: 0.3s;
}

.nav-link:hover {
    color: #ffb700 !important;
    transform: scale(1.05);
}

.search-container{
flex-grow:1;
max-width:600px;
margin:0 20px;
position:relative
}

.search-input{
width:100%;
padding:9px 15px;
border-radius:4px;
border:none;
outline:none
}

.search-btn{
position:absolute;
right:0;
top:0;
height:100%;
background:#fff;
border:none;
padding:0 15px;
color:var(--primary);
transition: 0.3s;
border-radius: 0 4px 4px 0;
}

.search-btn:hover {
    background-color: #f1f1f1;
    color: var(--secondary);
}

.category-title{
font-weight:700;
color:var(--dark);
margin:20px 0;
padding-top: 80px; /* Navbar kinda hide avvakunda gap */
margin-top: -60px;
}

.product-card{
background:#fff;
border:1px solid var(--border);
border-radius:8px;
padding:15px;
transition:.2s;
display:flex;
flex-direction:column;
height:100%
}

.product-card:hover{
box-shadow:0 8px 16px rgba(0,0,0,.1);
transform:translateY(-3px)
}

.product-img-container{
height:160px;
display:flex;
align-items:center;
justify-content:center;
margin-bottom:15px
}

.product-img-container img{
max-height:100%;
max-width:100%;
object-fit:contain
}

.product-name{
font-size:.95rem;
height:2.4em;
overflow:hidden;
display:-webkit-box;
-webkit-line-clamp:2;
-webkit-box-orient:vertical
}

.price-tag{
font-size:1.2rem;
font-weight:700
}

.btn-add{
background-color:#fb641b;
color:#fff;
border:none;
padding:10px;
font-weight:600;
width:100%;
text-transform:uppercase;
font-size:14px;
border-radius:2px;
transition:background-color .2s ease, box-shadow .2s ease
}

.btn-add:hover{
background-color:#e65a16;
color:#fff;
box-shadow:0 2px 6px rgba(0,0,0,.2)
}

.btn-go-cart{
background:#ffc107;
color:#212121;
padding:10px;
font-weight:600;
text-align:center;
display:block;
text-decoration:none
}

footer{
background:#172337;
color:#fff;
padding:30px 0;
margin-top:auto
}

.footer-links a{
color:#878787;
text-decoration:none;
margin:0 10px;
font-size:.9rem
}

.footer-links a:hover{
color:#fff
}
</style>
</head>

<body>

<nav class="navbar navbar-expand-lg fixed-top">
<div class="container">
<a class="navbar-brand" href="{% url 'home' %}">MODERN SHOP</a>

<button class="navbar-toggler text-white border-0" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
<span class="navbar-toggler-icon" style="filter:invert(1);"></span>
</button>

<div class="collapse navbar-collapse" id="nav">
    
<ul class="navbar-nav mb-2 mb-lg-0">
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="catDrop" role="button" data-bs-toggle="dropdown">
            Categories
        </a>
        <ul class="dropdown-menu shadow">
            <li><a class="dropdown-item" href="#Fashion">Fashion</a></li>
            <li><a class="dropdown-item" href="#Electronics">Electronics</a></li>
            <li><a class="dropdown-item" href="#Footwear">Footwear</a></li>
            <li><a class="dropdown-item" href="#Sports">Sports</a></li>
            <li><a class="dropdown-item" href="#Gym">Gym</a></li>
        </ul>
    </li>
</ul>

<form action="{% url 'home' %}" method="GET" class="search-container my-2 my-lg-0">
<input class="search-input" type="text" name="query" placeholder="Search products..." value="{{ query|default:'' }}">
<button class="search-btn"><i class="fas fa-search"></i></button>
</form>

<div class="navbar-nav ms-auto align-items-center">

{% if user.is_authenticated %}
<div class="nav-item dropdown">
<a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" style="cursor: pointer;">
<i class="fas fa-user-circle"></i> {{ user.username }}
</a>
<ul class="dropdown-menu dropdown-menu-end shadow">
<li><a class="dropdown-item" href="{% url 'order_list' %}">My Orders</a></li>
<li><hr class="dropdown-divider"></li>
<li><a class="dropdown-item text-danger" href="{% url 'logout_view' %}">Logout</a></li>
</ul>
</div>
{% else %}
<a class="nav-link" href="{% url 'login_view' %}">Login</a>
<a class="nav-link btn btn-outline-light ms-2 px-3 py-1" href="{% url 'register' %}">Register</a>
{% endif %}

<a class="nav-link position-relative ms-3" href="{% url 'view_cart' %}">
<i class="fas fa-shopping-cart fa-lg"></i>
{% if cart_count > 0 %}
<span class="badge bg-danger position-absolute top-0 start-100 translate-middle">
{{ cart_count }}
</span>
{% endif %}
</a>

</div>
</div>
</div>
</nav>

<div class="container mb-5">
{% for group in grouped_products %}
<h4 class="category-title" id="{{ group.name }}">{{ group.name }}</h4>

<div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 g-3">
{% for item in group.products %}
<div class="col">
<div class="product-card">

<div class="product-img-container">
{% if item.image %}
<img src="{{ item.image.url }}" alt="{{ item.name }}">
{% else %}
<img src="https://via.placeholder.com/150">
{% endif %}
</div>

<div class="flex-grow-1">
<h6 class="product-name" title="{{ item.name }}">{{ item.name }}</h6>
<p class="price-tag">₹{{ item.price }}</p>
</div>

<div class="mt-2">
{% if item.in_cart_qty > 0 %}
<a href="{% url 'view_cart' %}" class="btn-go-cart">GO TO CART</a>
{% else %}
<form method="POST">
{% csrf_token %}
<input type="hidden" name="product" value="{{ item.id }}">
<button type="submit" class="btn-add">
<i class="fas fa-shopping-cart me-2"></i> Add To Cart
</button>
</form>
{% endif %}
</div>

</div>
</div>
{% endfor %}
</div>

{% empty %}
<div class="text-center py-5">
<h5 class="text-muted">No products found.</h5>
</div>
{% endfor %}
</div>

<footer>
<div class="container text-center">
<span class="fw-bold">MODERN SHOP</span> © 2026
<div class="footer-links mt-2">
<a href="#">About</a>
<a href="#">Contact</a>
<a href="#">Privacy</a>
<a href="#">Terms</a>
</div>
</div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>